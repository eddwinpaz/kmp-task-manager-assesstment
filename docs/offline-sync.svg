<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 550">
  <defs>
    <linearGradient id="localGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1d4ed8;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="cloudGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#6d28d9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="syncGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="queueGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d97706;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow4" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="2" dy="3" stdDeviation="3" flood-opacity="0.15"/>
    </filter>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#475569"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#10b981"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="450" y="35" font-family="Arial, sans-serif" font-size="22" font-weight="bold" text-anchor="middle" fill="#1e293b">Estrategia Offline-First</text>
  <text x="450" y="55" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#64748b">Single Source of Truth: Base de Datos Local</text>

  <!-- UI Layer -->
  <rect x="50" y="90" width="180" height="80" rx="12" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2" filter="url(#shadow4)"/>
  <text x="140" y="125" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#334155">UI Layer</text>
  <text x="140" y="145" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">Compose + ViewModel</text>

  <!-- Local Database (Source of Truth) -->
  <rect x="320" y="80" width="260" height="100" rx="15" fill="url(#localGrad)" filter="url(#shadow4)"/>
  <text x="450" y="115" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">SQLDelight</text>
  <text x="450" y="138" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="rgba(255,255,255,0.9)">Base de Datos Local</text>
  <text x="450" y="160" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="rgba(255,255,255,0.8)">SINGLE SOURCE OF TRUTH</text>

  <!-- Remote Server -->
  <rect x="670" y="90" width="180" height="80" rx="12" fill="url(#cloudGrad)" filter="url(#shadow4)"/>
  <text x="760" y="125" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">API Server</text>
  <text x="760" y="145" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="rgba(255,255,255,0.8)">Backend REST</text>

  <!-- Arrows UI <-> Local -->
  <line x1="230" y1="120" x2="315" y2="120" stroke="#475569" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="272" y="112" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#475569">Read</text>

  <line x1="315" y1="140" x2="230" y2="140" stroke="#10b981" stroke-width="2" marker-end="url(#arrowGreen)"/>
  <text x="272" y="155" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#10b981">Flow&lt;Data&gt;</text>

  <!-- Arrows Local <-> Remote -->
  <line x1="580" y1="115" x2="665" y2="115" stroke="#475569" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="622" y="108" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#475569">Push</text>

  <line x1="665" y1="145" x2="580" y2="145" stroke="#10b981" stroke-width="2" marker-end="url(#arrowGreen)"/>
  <text x="622" y="160" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#10b981">Pull</text>

  <!-- Sync States Section -->
  <rect x="50" y="210" width="800" height="150" rx="15" fill="#f0fdf4" stroke="#22c55e" stroke-width="2"/>
  <text x="450" y="235" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#166534">Estados de Sincronización</text>

  <!-- SYNCED -->
  <rect x="80" y="255" width="130" height="85" rx="10" fill="#22c55e" filter="url(#shadow4)"/>
  <text x="145" y="285" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">SYNCED</text>
  <text x="145" y="305" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.9)">Sincronizado</text>
  <text x="145" y="325" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">Sin acciones</text>

  <!-- PENDING_CREATE -->
  <rect x="230" y="255" width="130" height="85" rx="10" fill="#f59e0b" filter="url(#shadow4)"/>
  <text x="295" y="280" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">PENDING</text>
  <text x="295" y="295" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">CREATE</text>
  <text x="295" y="315" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.9)">Creado offline</text>
  <text x="295" y="330" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">→ POST</text>

  <!-- PENDING_UPDATE -->
  <rect x="380" y="255" width="130" height="85" rx="10" fill="#f59e0b" filter="url(#shadow4)"/>
  <text x="445" y="280" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">PENDING</text>
  <text x="445" y="295" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">UPDATE</text>
  <text x="445" y="315" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.9)">Modificado offline</text>
  <text x="445" y="330" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">→ PUT</text>

  <!-- PENDING_DELETE -->
  <rect x="530" y="255" width="130" height="85" rx="10" fill="#f59e0b" filter="url(#shadow4)"/>
  <text x="595" y="280" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">PENDING</text>
  <text x="595" y="295" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">DELETE</text>
  <text x="595" y="315" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.9)">Eliminado offline</text>
  <text x="595" y="330" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">→ DELETE</text>

  <!-- CONFLICT -->
  <rect x="680" y="255" width="130" height="85" rx="10" fill="#ef4444" filter="url(#shadow4)"/>
  <text x="745" y="285" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="white">CONFLICT</text>
  <text x="745" y="305" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.9)">Conflicto</text>
  <text x="745" y="325" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">User decision</text>

  <!-- Sync Flow Section -->
  <rect x="50" y="380" width="800" height="150" rx="15" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="450" y="405" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#92400e">Flujo de Sincronización (WorkManager)</text>

  <!-- Flow steps -->
  <rect x="80" y="425" width="140" height="80" rx="8" fill="#fbbf24" filter="url(#shadow4)"/>
  <text x="150" y="455" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#78350f">1. Detectar</text>
  <text x="150" y="470" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#78350f">Conexión</text>
  <text x="150" y="490" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#92400e">ConnectivityManager</text>

  <line x1="220" y1="465" x2="260" y2="465" stroke="#78350f" stroke-width="2" marker-end="url(#arrow)"/>

  <rect x="260" y="425" width="140" height="80" rx="8" fill="#fbbf24" filter="url(#shadow4)"/>
  <text x="330" y="455" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#78350f">2. Obtener</text>
  <text x="330" y="470" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#78350f">Pendientes</text>
  <text x="330" y="490" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#92400e">WHERE sync != SYNCED</text>

  <line x1="400" y1="465" x2="440" y2="465" stroke="#78350f" stroke-width="2" marker-end="url(#arrow)"/>

  <rect x="440" y="425" width="140" height="80" rx="8" fill="#fbbf24" filter="url(#shadow4)"/>
  <text x="510" y="455" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#78350f">3. Enviar</text>
  <text x="510" y="470" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#78350f">a Servidor</text>
  <text x="510" y="490" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#92400e">Ktor HTTP Client</text>

  <line x1="580" y1="465" x2="620" y2="465" stroke="#78350f" stroke-width="2" marker-end="url(#arrow)"/>

  <rect x="620" y="425" width="140" height="80" rx="8" fill="#fbbf24" filter="url(#shadow4)"/>
  <text x="690" y="455" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#78350f">4. Actualizar</text>
  <text x="690" y="470" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#78350f">Estado Local</text>
  <text x="690" y="490" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#92400e">SYNCED / CONFLICT</text>
</svg>