<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 400">
  <defs>
    <linearGradient id="uiGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#6366f1;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8b5cf6;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="vmGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ec4899;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f43f5e;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="ucGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#14b8a6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#06b6d4;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="repoGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#eab308;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow2" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="3" stdDeviation="3" flood-opacity="0.15"/>
    </filter>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#374151"/>
    </marker>
    <marker id="arrowheadBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3b82f6"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="450" y="35" font-family="Arial, sans-serif" font-size="22" font-weight="bold" text-anchor="middle" fill="#1e293b">Flujo de Datos MVI (Model-View-Intent)</text>

  <!-- UI Component -->
  <rect x="50" y="140" width="140" height="120" rx="12" fill="url(#uiGrad)" filter="url(#shadow2)"/>
  <text x="120" y="185" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Compose UI</text>
  <text x="120" y="205" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="rgba(255,255,255,0.8)">View</text>
  <text x="120" y="240" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.7)">Observa State</text>
  <text x="120" y="252" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.7)">Emite Intents</text>

  <!-- ViewModel -->
  <rect x="280" y="140" width="140" height="120" rx="12" fill="url(#vmGrad)" filter="url(#shadow2)"/>
  <text x="350" y="185" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">ViewModel</text>
  <text x="350" y="205" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="rgba(255,255,255,0.8)">MVI Processor</text>
  <text x="350" y="240" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.7)">Procesa Intent</text>
  <text x="350" y="252" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.7)">Emite State</text>

  <!-- Use Case -->
  <rect x="510" y="140" width="140" height="120" rx="12" fill="url(#ucGrad)" filter="url(#shadow2)"/>
  <text x="580" y="185" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Use Case</text>
  <text x="580" y="205" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="rgba(255,255,255,0.8)">Business Logic</text>
  <text x="580" y="240" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.7)">Ejecuta l√≥gica</text>
  <text x="580" y="252" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.7)">de negocio</text>

  <!-- Repository -->
  <rect x="740" y="140" width="140" height="120" rx="12" fill="url(#repoGrad)" filter="url(#shadow2)"/>
  <text x="810" y="185" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Repository</text>
  <text x="810" y="205" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="rgba(255,255,255,0.8)">Data Source</text>
  <text x="810" y="240" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.7)">Local + Remote</text>
  <text x="810" y="252" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="rgba(255,255,255,0.7)">Data Access</text>

  <!-- Arrows - Forward flow (top) -->
  <line x1="190" y1="175" x2="275" y2="175" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="232" y="168" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#374151">Intent</text>

  <line x1="420" y1="175" x2="505" y2="175" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="462" y="168" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#374151">Execute</text>

  <line x1="650" y1="175" x2="735" y2="175" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="692" y="168" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#374151">Query</text>

  <!-- Arrows - Return flow (bottom) -->
  <line x1="740" y1="225" x2="655" y2="225" stroke="#3b82f6" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrowheadBlue)"/>
  <text x="697" y="245" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#3b82f6">Flow&lt;Data&gt;</text>

  <line x1="510" y1="225" x2="425" y2="225" stroke="#3b82f6" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrowheadBlue)"/>
  <text x="467" y="245" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#3b82f6">Result</text>

  <line x1="280" y1="225" x2="195" y2="225" stroke="#3b82f6" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrowheadBlue)"/>
  <text x="237" y="245" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#3b82f6">State</text>

  <!-- State box -->
  <rect x="280" y="300" width="340" height="70" rx="10" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="2"/>
  <text x="450" y="325" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#475569">TaskListState (Inmutable)</text>
  <text x="450" y="350" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">tasks: List&lt;Task&gt; | isLoading: Boolean | error: ErrorType?</text>

  <!-- Arrow from ViewModel to State -->
  <line x1="350" y1="260" x2="350" y2="295" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Legend -->
  <rect x="50" y="310" width="180" height="60" rx="8" fill="#f8fafc" stroke="#e2e8f0"/>
  <text x="140" y="330" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#334155">Leyenda</text>
  <line x1="65" y1="345" x2="105" y2="345" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="160" y="348" font-family="Arial, sans-serif" font-size="10" text-anchor="start" fill="#64748b">Flujo de acciones</text>
  <line x1="65" y1="358" x2="105" y2="358" stroke="#3b82f6" stroke-width="2" stroke-dasharray="5,3"/>
  <text x="160" y="361" font-family="Arial, sans-serif" font-size="10" text-anchor="start" fill="#64748b">Flujo de datos</text>
</svg>